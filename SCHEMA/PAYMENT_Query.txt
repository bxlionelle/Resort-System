-- Drop existing PAYMENT table if it exists
DROP TABLE IF EXISTS PAYMENT;

-- Create PAYMENT table with auto-increment starting at 1211100
CREATE TABLE PAYMENT (
    payment_id INTEGER PRIMARY KEY AUTOINCREMENT,
    guest_id INTEGER,
    booking_id INTEGER,
    payment_method TEXT,
    FOREIGN KEY (guest_id) REFERENCES GUEST(guest_id),
    FOREIGN KEY (booking_id) REFERENCES BOOKING(booking_id)
);

-- SQLite Sequence Reset Trick for PAYMENT table
DELETE FROM sqlite_sequence WHERE name='PAYMENT';
INSERT INTO sqlite_sequence (name, seq) VALUES ('PAYMENT', 1211099);

-- Insert example payments
INSERT INTO PAYMENT (guest_id, booking_id, payment_method) VALUES 
(22100, 1, 'Credit Card'),
(22101, 2, 'Debit Card');

-- Verification Query
SELECT payment_id, guest_id, payment_method FROM PAYMENT;