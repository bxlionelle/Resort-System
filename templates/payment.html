<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Payment</title>

    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="/static/style.css">
   
</head>
<body>
    <header>

        <input type="checkbox" name="" id="toggler">
        <label for="toggler" class="fas fa-bars"></label>
    
        <a href="#" class="logo">Resort<span>.</span></a>
    </header>  
    <div class="payment-block">
        <h3 class="payment">Payment Details</h3>
        <section class="pay">
        <form action="/payment" method="GET">   

            <p>Guest Name: {{ user_info.firstname }} {{ user_info.lastname }}</p>
            <p>Room Type: {{ guest.room_name }}</p>
        </form>

            <form action="" method="POST">
                <label for="payment-method">Payment Method:</label>
                <select id="payment-method" name="payment-method" onchange="showPaymentDetails()">
                    <option value="paypal">PayPal</option>
                    <option value="credit-card">Credit Card</option>
                    <option value="debit-card">Debit Card</option>
                </select><br>
        
                <div id="payment-details"></div>
        
                <button class="btn btn --primary color" value="Complete Booking">Complete Booking</button>
            </form>
            <a href="{{ url_for('reservationform', check_in=guest.check_in, check_out=guest.check_out, adults=guest.adults, children=guest.children, room_type=guest.room_type) }}"><button class="btn btn --primary color">Cancel</button></a>
        
            <script>
                function showPaymentDetails() {
                    var paymentMethod = document.getElementById("payment-method").value;
                    var paymentDetailsDiv = document.getElementById("payment-details");
                    var detailsHtml = '';
        
                    if (paymentMethod === 'paypal') {
                        <a href="https://www.paypal.com/agreements/approve?nolegacy=1&ba_token=BA-4TF940738P5160257">Redirecting to Paypal</a>
                        <!--detailsHtml = '<label for="paypal-email">Enter your PayPal Email:</label><input type="email" id="paypal-email" name="paypal-email" required><br>'-->
                    } else if (paymentMethod === 'credit-card' || paymentMethod === 'debit-card') {
                        detailsHtml = `
                            <label for="carddolders-name">Cardholder's Name</label>
                            <input type="text" id="cardholders-name" name="cardholders-name" required>
        
                            <label for="card-number">Card Number:</label>
                            <input type="text" id="card-number" name="card-number" required>
        
                            <label for="expiry-date">Expiry Date:</label>
                            <input type="text" id="expiry-date" name="expiry-date" required placeholder="MM/YY">
        
                            <label for="cvv">CVV:</label>
                            <input type="text" id="cvv" name="cvv" required>
                        `;
                    }
        
                    paymentDetailsDiv.innerHTML = detailsHtml;
                }
            </script>
        </section>
    </div>
</body>
</html>